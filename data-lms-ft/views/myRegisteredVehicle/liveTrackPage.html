<div class="container" ng-controller="liveTrackPageController">
	<div class="card m-b-0" id="messages-main">
		<div class="" style=" min-height: 575px;">
			<div class="listview lv-message">
				<!-- <div class="lv-header-alt clearfix" style="padding: 0px;">
					<div class="clearfix"></div>
				</div> -->

				<div class="lv-body">
				<ul class="list-group list-group-flush" style="margin-bottom: 5px;">
					<div class="col-md-12" style="min-height: 272px;">
						
					<li class="list-group-item">
						<form role="form" ng-submit="filter(form)">
							<div class="col-xs-6 col-sm-2 col-md-2 col-lg-2">
								<div class="date-picker input-group dp-blue" ng-class="{ 'is-opened': opened1 == true }">
									<div class="fg-line" ng-class="{ 'fg-toggled': opened1 == true }">
										<input ng-click="open($event, 'opened1')" type="text" class="form-control" datepicker-popup="{{format}}" show-weeks="false" ng-model="from" is-open="opened1" datepicker-options="dateOptions" close-text="Close" placeholder="From Date" style="padding: 0px 4px;height: 34px;" />
									</div>
									<span class="input-group-btn">
                                  <button type="button" class="btn btn-default m-t-0 f12" ng-click="open($event, 'opened1')"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
								</div>
							</div>
							<div class="col-xs-6 col-sm-2 col-md-2 col-lg-2">
								<div class="date-picker input-group dp-blue" ng-class="{ 'is-opened': opened2 == true }" style=" ">
									<div class="fg-line" ng-class="{ 'fg-toggled': opened2 == true }">
										<input ng-click="open($event, 'opened2')" type="text" class="form-control" datepicker-popup="{{format}}" show-weeks="false" ng-model="to" is-open="opened2" datepicker-options="dateOptions" close-text="Close" placeholder="To Date" style="padding: 0px 4px; height: 34px;" />
									</div>
									<span class="input-group-btn">
                                  <button type="button" class="btn btn-default m-t-0 f12" ng-click="open($event, 'opened2')"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
								</div>
							</div>
							<div class="col-xs-6 m-b-5 col-sm-2 col-md-2 col-lg-2">
								<div class="fg-line">
									<input type="text" ng-model="address" name="address" class="form-control input-sm" placeholder="Address Search" style="height: 34px;font-size: 13px;">
								</div>
							</div>
							<div class="col-xs-6 m-b-5 col-sm-2 col-md-2 col-lg-2">
								<div class="">
									<button class="btn btn-primary" ng-click="getAllLiveTrack()">Search</button>
								</div>
							</div>
							<div class="col-xs-6 m-b-5 col-sm-2 col-md-2 col-lg-2 pull-right">



								<label ng-if="!(role_local_data.diesel.indexOf('add')==-1)" style="margin-top: 5px;margin-bottom: -10px;float: right;font-size: 20px;">
									
									
									
									<!--<a href="" uib-tooltip="Live Track Map View" ng-click="myLiveTrackMap(selectedliveData)" tooltip-placement="bottom">
										<span class="glyphicon glyphicon-map-marker"></span>
									</a>&nbsp;&nbsp;-->
									<a href="" uib-tooltip="Add Location" ng-click="addMoreLocation()" tooltip-placement="bottom">
										<span class="glyphicon glyphicon-plus"></span>
									</a>&nbsp;&nbsp;
									<!--<a href=""  uib-tooltip="Edit Live Track" tooltip-placement="bottom"
										   ng-click="updateliveData(selectedliveData)" >
											<i class="zmdi zmdi-edit">
											</i>
									</a>&nbsp;&nbsp;-->
									<a href="" uib-tooltip="Delete Live Track"
										   tooltip-placement="bottom"
										   ng-click="deleteliveData(selectedliveData)">
											<i class="zmdi zmdi-delete">
											</i>
										</a>&nbsp;&nbsp;
										<a href="" uib-tooltip="Download Live Track"
										   tooltip-placement="bottom"
										   ng-click="downloadLiveTrackCsv()">
										   <i class="zmdi zmdi-download zmdi-hc-fw"></i>
										</a>
								</label>
							</div>&nbsp;
						</form>
								
						<div class="clearfix"></div>
						<span class="booking_list_header">Summary</span>
						<div class="col-md-12 m-b-0">
							<div class="lvh-label pull-left">
								<span class="c-black"><b>Vehicle Number:</b>
									<span style="margin-left: 10px; color: rgb(25, 6, 18);" class="ng-binding">
										{{selectedTripData.vehicle_no || NA}}
									</span>
								</span>&nbsp;&nbsp;&nbsp;&nbsp;
								<span class="c-black"><b>Trip Number:</b>
									<span style="margin-left: 10px; color: rgb(25, 6, 18);" class="ng-binding">
										{{selectedTripData.trip_no || NA}}
									</span>
								</span>&nbsp;&nbsp;
								<span class="c-black"><b>Route:</b>
									<span style="margin-left: 10px; color: rgb(25, 6, 18);" class="ng-binding">
										{{selectedTripData.route_name || NA}} 
									</span>
								</span>
								<span class="c-black"><b>Trip Start Date:</b>
									<span style="margin-left: 10px; color: rgb(25, 6, 18);" class="ng-binding">
										{{selectedTripData.created_at  | date:"dd-MMM-yyyy 'at' h:mma" || NA}}
									</span>
								</span>&nbsp; &nbsp;
					
								<span class="c-black"><b>Status:</b>
									<span style="margin-left: 10px; color: rgb(25, 6, 18);" class="ng-binding">
										{{selectedTripData.status || NA}}
									</span>
								</span>
							</div>
						</div>
						
						<div class="clearfix"></div>
					</li>
					<li class="list-group-item">
						<span class="booking_list_header">Live Track Details</span>	
						<div class="pull-right">
							<button class="btn btn-primary p-t-0 p-b-0 m-t-5 waves-effect pull-right" style="margin-bottom: 3px;  font-size: 16px;" ng-click="plotMarketArry()">
								<i class="zmdi zmdi-view-column zmdi-hc-fw"></i>
							</button>
						</div>
						
						<!-----Start Detail View Listing-->
						<div class="detailsList" style="margin-top:10px;" ng-hide="showMap">
							<div class="" style="overflow-y: auto; max-height: 550px;">
								<table class="table table-bordered unresponsive">
									<thead>
									<tr>
										<th>Date</th>
										<th>Address</th>
										<th>Status</th>
										<th>Remark</th>
										<th>Created By</th>
										<th>Entry Date</th>
									</tr>
									</thead>
									<tbody>  
									<!--<tr ng-repeat="liveData in aLiveTrackData"
									ng-click="selectliveData = liveData; obj.selectedIndex = $index;"
									ng-class="{grn: obj.selectedIndex === $index}"
									class="pointer">-->
									<tr ng-repeat="liveData in aLiveTrackData"
									class="selectItem pointer"
									ng-click="selectThisRow(liveData, $index)">
										<td>{{liveData.created_at | date:"dd-MMM-yyyy 'at' h:mma" || 'NA'}}</td>
										<td>{{liveData.address || "NA"}}</td>
										<td>{{liveData.status || "NA"}}</td>
										<td>{{liveData.remarks || "NA"}}</td>
										<td>{{liveData.created_by || "NA"}}</td>
										<td>{{liveData.datetime | date:"dd-MMM-yyyy 'at' h:mma" || 'NA'}}</td>
									</tr>
									</tbody>
								</table>
								<div class="pagi" style="text-align: center;" ng-show="total_pages>1">
									<pagination ng-change="pageChanged()" total-items="totalItems" items-per-page="items_per_page" num-pages="numPages" ng-model="currentPage" max-size="maxSize" class="pagination-sm smallPagi" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;"
												first-text="&laquo;" last-text="&raquo;"></pagination>
								</div>
							</div>
							<div ng-if="aLiveTrackData.length == 0" class="ms-body" style=" min-height: 100px;">
								<h3>Data not available !!!!!</h3>
							</div>
						</div>
						<!-- END Detail View Listing-->
						<!-----Map View Start...-->
						<div class="card m-b-0 m-t-10 m-l-10 m-r-0" ng-show="showMap"
							style="background: none;box-shadow: none;width:98%;padding-bottom: 10px"
							id="messages-main">

							<div class="card" style="height: 350px;"> <!-- overflow: auto-->
								<div style="position: relative; height: 100%">
									<div ng-if="!showMap"
										style="height: 100%;"
										ui-view>
									</div>
									<div style="height: 100%;" ng-show="showMap">
										<div class="card-body" id="mapViewLiveTracking" style="width:100%; height: 100%; z-index: 1;"></div>

										<!--<div class="card-body absolutePosi zoomCtrls">
											<div class="pointer icon-wrapper"
												style="border-bottom: 1px solid #80808038"
												ng-click="vm.zoomIn()">
												<i class="glyphicon glyphicon glyphicon-plus" ></i>
											</div>
											<div class="pointer icon-wrapper"
												ng-click="vm.zoomOut()">
												<i class="glyphicon glyphicon glyphicon-minus" ></i>
											</div>
										</div>-->
									</div>
									<div class="absolutePosi pointer icon-wrapper"
										ng-if="!showMap"
										ng-click="$parent.showMap=true; $parent.selectedIndex = null"
										style="right: 0px;top: 0px;z-index: 1;font-size: 24px;margin: 5px; padding: 0px">
										<i class="zmdi zmdi-close-circle-o zmdi-hc-fw"></i>
									</div>
								</div>
							</div>
						</div>
						<!----END Map View-->
					</li>
						
					</div>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
