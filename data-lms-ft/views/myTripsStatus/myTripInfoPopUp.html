<form role="form" name="myTripPopUp" autocomplete="off">
	<div class="modal-header">
		<button type="button" ng-click="closeModal()" class="close"
				data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
		<h4 class="modal-title" align="center">Trip No. {{trip.trip_no}}</h4>
		<h5 class="modal-title" ng-style="allowableDelay ? {color:'green'} : {color:'red'}" align="center">Delay Hour
			{{delayHours}}</h5>
		<!--<button type="button" ng-click="changeDriver()" class="btn btn-primary btn-xs pull-left">Change Driver</button>-->
	</div>
	<div class="modal-body" ng-if="tripUpdate">
		<div class="justify col-md-12">
			<h4 ng-if="isInfo" style="color: green;">{{infoMessage}}</h4>

			<div class="row" ng-if="trip.updatedStatus === 'Trip started'">

				<!--<div class="col-md-12">-->
					<!--<div class="form-group m-b-0">-->
						<!--<label class="col-sm-2 control-label">Select Route:</label>-->
						<!--<div class="col-sm-10">-->
							<!--<div>-->
								<!--<select-->
										<!--chosen-->
										<!--class="form-control"-->
										<!--ng-model="selectedTrip1.route"-->
										<!--name="route"-->
										<!--ng-options="item as item.name for item in grRoutes track by item._id"-->
										<!--style="background-color: white;">-->
									<!--<option value="" selected disabled>Select</option>-->
								<!--</select>-->
							<!--</div>-->
							<!--<span-->
									<!--class="error"-->
									<!--ng-if="startTripPopup['route'].$error.required && (startTripPopup['route'].$touched || startTripPopup.$submitted)"-->
							<!--&gt;-->
                <!--This Field is Mandatory-->
              <!--</span>-->
						<!--</div>-->
					<!--</div>-->
				<!--</div>-->

				<div class="col-md-12" ng-repeat="g in selectedTrip1.gr">
					<h4 style="text-decoration:underline;">GR Details #{{$index+1}}</h4>
<!--					<div class="col-md-4">-->
<!--						<label class="col-sm-4 control-label">Consignor:</label>-->
<!--						<div class="col-sm-8">-->
<!--							{{g.consignor && g.consignor.name}}-->
<!--&lt;!&ndash;							<input&ndash;&gt;-->
<!--&lt;!&ndash;									type="text"&ndash;&gt;-->
<!--&lt;!&ndash;									name="consignor"&ndash;&gt;-->
<!--&lt;!&ndash;									id="consignor"&ndash;&gt;-->
<!--&lt;!&ndash;									class="form-control input-sm"&ndash;&gt;-->
<!--&lt;!&ndash;									ng-init="g.consignor = g.booking.consigner._id"&ndash;&gt;-->
<!--&lt;!&ndash;									ng-model="g.booking.consigner.name"&ndash;&gt;-->
<!--&lt;!&ndash;									disabled>&ndash;&gt;-->
<!--						</div>-->
<!--					</div>-->
<!--					<div class="col-md-8">-->
<!--						<div class="form-group m-b-0">-->
<!--							<label class="col-sm-2 control-label">Consignee:</label>-->
<!--							<div class="col-sm-10">-->
<!--								<select-->
<!--										chosen-->
<!--										placeholder-text-multiple="'Select Consignee'"-->
<!--										class="form-control"-->
<!--										ng-model="g.consignee"-->
<!--										ng-init="getConsignee(g, $index)"-->
<!--										ng-options="item._id as item.name for item in aConsignee{{$index}} track by item._id"-->
<!--										name="Consignee"-->
<!--										style="background-color:#fff">-->
<!--									<option value="" selected disabled></option>-->
<!--								</select>-->
<!--								<span-->
<!--										class="error"-->
<!--										ng-if="startTripPopup['Consignee'].$error.required && (startTripPopup['Consignee'].$touched || startTripPopup.$submitted)"-->
<!--								>-->
<!--                  This Field is Mandatory-->
<!--                </span>-->
<!--							</div>-->
<!--						</div>-->
<!--					</div>-->
				</div>

				<div style="clear:both"></div>
			</div>


			<div class="row">
				<div class="col-md-5">
					<div class="form-group m-b-0">
						<label class="col-sm-6 control-label">Set Status</label>
						<div class="col-sm-6">
							<div class="">
								<!--<select class="form-control" ng-model="trip.setStatus" ng-options="o for o in statusSet"
										style="background-color: white;">
									<option value="" disabled selected>Set Status</option>
								</select>-->
								{{trip.updatedStatus}}
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-7">
					<div class="form-group m-b-0">
						<label class="col-sm-2 control-label">Time</label>
						<div class="col-sm-4">
							<div class="date-picker input-group dp-blue" ng-class="{ 'is-opened': opened1 == true }">
								<div class="fg-line" ng-class="{ 'fg-toggled': opened1 == true }">
									<input ng-click="open($event, 'opened1')"
										   type="text"
										   class="form-control"
										   uib-datepicker-popup="{{format}}"
										   show-weeks="false"
										   ng-model="trip.date"
										   is-open="$parent.opened1"
										   datepicker-options="dateOptions"
										   min-date="minDate"
										   max-date="maxDate"
										   close-text="Close"
										   ng-change="changeTime3(trip.time)"
										   style="padding: 0px 4px;height: 34px;"/>
								</div>
								<span class="input-group-btn">
									<button type="button" class="btn btn-default m-t-0 f12" ng-click="open($event, 'opened1')"><i
											class="glyphicon glyphicon-calendar"></i></button>
							  	</span>
							</div>
						</div>
						<label class="col-sm-1 control-label">HH</label>
						<div class="col-sm-2">
							<div class="select">
								<select ng-model="$parent.hourSel1" ng-options="sAlert as sAlert for sAlert in aHours" class="form-control" ng-change="changeTime1(hourSel1)">
								</select>
							</div>
						</div>
						<label class="col-sm-1 control-label">MM</label>
						<div class="col-sm-2">
							<div class="select">
								<select ng-model="$parent.minuteSel1" ng-options="sAlert as sAlert for sAlert in aMinutes" class="form-control"  ng-change="changeTime2(minuteSel1)">
								</select>
							</div>
						</div>
					</div>
				</div>
	<!-- ///////////// odometer			 -->
	         <div ng-if="$configs && $configs.booking">
					<div ng-if="$configs.booking && $configs.booking.odometer">
		        		<div class="col-md-6" ng-show="trip.updatedStatus =='Trip started'">
		 			    <div class="form-group m-b-0">
						    <label class="col-sm-6 control-label">Start Odometer
					      	</label>
					         	<div class="col-sm-6">
						         	<div class="fg-line">
							    	<input type="number" ng-model="trip.startOdo" placeholder="Enter Start Reading" class="form-control">
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6" ng-show="trip.updatedStatus =='Trip ended'">
					<div class="form-group m-b-0">
						<label class="col-sm-6 control-label">End Odometer
						</label>
						<div class="col-sm-6">
							<div class="fg-line">
								<input type="number" ng-model="trip.endOdo" placeholder="Enter End Reading" class="form-control">
							</div>
						</div>
					</div>
			    	</div>
				</div>
			</div>
				<div class="col-md-6">
					<div class="form-group m-b-0">
						<label class="col-sm-6 control-label">Remark <span ng-if="$configs.trips.tripEndRmkReq && trip.updatedStatus === 'Trip ended'" class="req_r">*</span> </label>
						<div class="col-sm-6">
							<div class="fg-line">
								<input type="text" ng-model="trip.remark" placeholder="Remark..." class="form-control">
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="clearfix"></div>
			<br>
		</div>
	</div>
	<div class="modal-body" ng-if="tripDriverUpdate">
		<div class="justify col-md-12">
			<h4 ng-if="GRisInfo" style="color: green;">{{GRinfoMessage}}</h4><br>
			<div class="row">
				<div class="col-md-6">
					<div class="form-group m-b-0">
						<label class="col-sm-4 control-label">Driver</label>
						<div class="col-sm-8">
							<div class="lvh-search ng-scope sear">
								<input
										type="text"
										class="form-control lvhs-input"
										placeholder="Driver Search..."
										ng-model="trip.driver_data"
										typeahead-wait-ms="10"
										typeahead="item as (item.nameCode || item.name) for item in getAllDriverData($viewValue)"
										ng-readonly="driver_notchange"
								>
								<i class="lvh-search-close" ng-click="trip.driver_data=null;" ng-hide="driver_notchange">Ã—</i>
							</div>

							<!--<select chosen class="form-control" ng-model="" ng-change="selectDriver()"-->
									<!--ng-options="item as item.name for item in aDriver" name="Driver Name">-->
								<!--<option value=""></option>-->
							<!--</select>-->

						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-group m-b-0">
						<label class="col-sm-6 control-label">Remark <span class="req_r">*</span></label>
						<div class="col-sm-6">
							<input type="text" class="form-control" ng-model="updated_status.remark" required>
						</div>
					</div>
				</div>
			</div>

			<div class="clearfix"></div>
			<br>
		</div>
	</div>
	<div class="modal-footer" ng-if="tripUpdate">
		<button class="btn btn-success waves-effect" ng-disabled="$configs.trips.tripEndRmkReq && (trip.updatedStatus === 'Trip ended')? ( !(trip.remark) || (trip.remark && tripstDisabled)): tripstDisabled" ng-click="updateTripInfo()">Update Trip</button>
		<button class="btn btn-warning" ng-click="closeModal()">Close</button>
	</div>
	<div class="modal-footer" ng-if="tripDriverUpdate">
		<button class="btn btn-success waves-effect" ng-disabled="!(updated_status.remark)" ng-click="saveDriver()">Save Driver</button>
		&nbsp;&nbsp;&nbsp;
		<button class="btn btn-warning" ng-click="closeModal()">Close</button>
	</div>
</form>
<style type="text/css">
	.modal-dialog {
		width: 50%;
		height: 173px
	}

	.exced {
		margin-top: 20px;
		margin-left: 10px;
	}

	.exced div div .control-label {
		font-weight: bolder;
	}

	td, th {
		text-align: center;
	}

	.pac-container.pac-logo {
		z-index: 9999;
	}
</style>
